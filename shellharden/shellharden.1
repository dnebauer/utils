.\" Hey, EMACS: -*- nroff -*-

.\" Filename: shellharden.1
.\" Author:   David Nebauer
.\" History:  2025-10-05 - created

.\" -----------------------------------------------------------------
.\" NOTES
.\" -----------------------------------------------------------------
.ig

For header (.TH), first parameter, NAME, should be all caps
Second parameter, SECTION, should be 1-8, maybe w/ subsection
Other parameters are allowed: see man(7), man(1)
Please adjust the date whenever revising the manpage.

Some roff macros, for reference:
.nh        disable hyphenation
.hy        enable hyphenation
.ad l      left justify
.ad b      justify to both left and right margins
.nf        disable filling
.fi        enable filling
.br        insert line break
.sp <n>    insert n+1 empty lines
for manpage-specific macros, see groff_man(7) and man(7)

Formatting [see groff_char (7) and man (7) for details]:
\(aq  : escape sequence for (')
\[dq] : plain double quote
\[lq] : left/open double quote
\[rq] : right/close double quote
`     : left/open single quote
'     : right/close single quote
\(em  : escape sequence for em dash
\(en  : escape sequence for en dash
\.    : escape sequence for period/dot
\(rg  : registration symbol
\(tm  : trademark symbol
\fX   : escape sequence that changes font, where 'X' can be 'R|I|B|BI'
        (R = roman/normal | I = italic | B = bold | BI = bold-italic)
\fP   : switch to previous font
        in this case '\fR' could also have been used
.B    : following arguments are boldened
.I    : following arguments are italicised
.BI   : following arguments are bold alternating with italics
.BR   : following arguments are bold alternating with roman
.IB   : following arguments are italics alternating with bold
.IR   : following arguments are italics alternating with roman
.RB   : following arguments are roman alternating with bold
.RI   : following arguments are roman alternating with italics
.SM   : following arguments are small (scaled 9/10 of the regular size)
.SB   : following arguments are small bold (not small alternating with bold)
        [note: if argument in alternating pattern contains whitespace,
               enclose in whitespace]
.RS x : indent following lines by x characters
.RE   : end indent

Bulleted list:
   A bulleted list:
   .IP \[bu] 2
   lawyers
   .IP \[bu]
   guns
   .IP \[bu]
   money
Numbered list:
   A numbered list:
   .nr step 1 1
   .IP \n[step]. 3
   lawyers
   .IP \n+[step].
   guns
   .IP \n+[step].
   money
..

.\" -----------------------------------------------------------------
.\" SETUP
.\" -----------------------------------------------------------------

.\" Macro: Format URL
.\"  usage:  .URL "http:\\www.gnu.org" "GNU Project" " of the"
.\"  params: 1 = url
.\"          2 = link text/name
.\"          3 = postamble (optional)
.\"  note:   The www.tmac macro provides a .URL macro package; this
.\"          is a local fallback in case www.tmac is unavailable
.\"  credit: man(7)
.de URL
\\$2 \(laURL: \\$1 \(ra\\$3
..

.\" Prefer .URL macro from www.tmac macro package if it is available
.\"  note: In the conditional below the '\n' escape returns the value of
.\"        a register, in this the '.g'
.\"        The '.g' register is only found in GNU 'troff', and it is
.\"        assumed that GNU troff will always include the www.tmac
.\"        macro package
.if \n[.g] .mso www.tmac

.\" Macro: Ellipsis
.\"  usage: .ellipsis
.\"  note: only works at beginning of line
.de ellipsis
.cc ^
...
^cc
..

.\" String: Command name
.ds self shellharden

.\" -----------------------------------------------------------------
.\" MANPAGE CONTENT
.\" -----------------------------------------------------------------

.TH "SHELLHARDEN" "1" "2025-10-05" "" "SHELLHARDEN Manual"
.SH "NAME"
\*[self] \- the corrective bash syntax highlighter
.SH "SYNOPSIS"
.BR "\*[self] " "[options] [file ...]"
.SH "DESCRIPTION"
ShellHarden is a syntax highlighter and a tool to semi-automate the rewriting
of scripts to ShellCheck conformance, mainly focused on quoting.
.PP
The default mode of operation is like `cat`, but with syntax highlighting in
foreground colors and suggestive changes in background colors.
.PP
The changes suggested by Shellharden inhibits word splitting and indirect
pathname expansion. This will make your script ShellCheck compliant in terms of
quoting. Whether your script will work afterwards is a different question:
If your script was using those features on purpose, it obviously won't anymore!
.PP
Every script is possible to write without using word splitting or indirect
pathname expansion, but it may involve doing things differently.
See
.URL "https://github.com/anordal/shellharden/blob/master/how_to_do_things_safely_in_bash.md" "\(aqHow to do things safely in bash\(aq" "."
.SH "OPTIONS"
.TP
.B "\-\-check"
No output; exit with 2 if changes are suggested.
.TP
.B "\-\-replace"
Replace file contents with suggested changes.
.TP
.B "\-\-suggest"
Output a colored diff suggesting changes.
.TP
.B "\-\-syntax"
Output syntax highlighting with ANSI colors.
.TP
.B "\-\-syntax\-suggest"
Diff with syntax highlighting (default mode).
.TP
.B "\-\-transform"
Output suggested changes.
.TP
.B "\-\-"
Don't treat further arguments as options.
.TP
.B "\-h  \-\-help"
Show help text.
.TP
.B "\-\-version"
Show version.
.SH "FILES"
.I https://github.com/anordal/shellharden/blob/master/how_to_do_things_safely_in_bash.md
.IP
This guide accompanies Shellharden, the corrective syntax highlighter.
Shellharden suggests, and can apply, changes to remove vulnerabilities in
shellscripts. This is in accordance with
.URL "https://github.com/koalaman/shellcheck/" "ShellCheck"
and
.URL "http://mywiki.wooledge.org/BashPitfalls" "BashPitfalls"
\(en Shellharden shall not disagree with these.
The problem is that not all scripts will work with their vulnerabilities simply
removed, because
.I "that"
was their working principle, and must be rewritten quite differently.
Thus the need for a human in the loop and a holistic methodology.
.SH "SEE ALSO"
.BR "shellcheck " "(1)."
.PP
.SH "AUTHOR"
ShellHarden was written by
.URL "https://github.com/anordal" "Andreas Nordal" "."
.PP
This manual page was written by
.URL "david at nebauer.org" "David Nebauer"
for the Debian project (but may be used by others).

