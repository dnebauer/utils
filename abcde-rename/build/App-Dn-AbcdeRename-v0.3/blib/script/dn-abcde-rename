#!/usr/bin/perl

# modules    {{{1
use Moo;
use strictures 2;
use 5.038_001;
use version; our $VERSION = qv('0.3');    # }}}1

{

  package Dn::Internal;

  # modules    {{{1
  use Moo;
  use strictures 2;
  use namespace::clean;
  use Const::Fast;
  use App::Dn::AbcdeRename;
  use MooX::Options;

  const my $TRUE => 1;    # }}}1

  # options

  # artist    {{{1
  option 'artist' => (
    is            => 'ro',
    format        => 's',
    required      => $TRUE,
    short         => 'a',
    documentation => 'Artist name',
  );    # }}}1

  # methods

  # main()    {{{1
  #
  #   does:   main method
  #   params: nil
  #   prints: feedback
  #   return: result
  sub main ($self) {    ## no critic (RequireInterpolationOfMetachars)

    my $rename = App::Dn::AbcdeRename->new(artist => $self->artist);
    $rename->rename;

    return;
  }                     # }}}1

}

my $p = Dn::Internal->new_with_options->main;

1;

#     {{{1

__END__

=head1 NAME

dn-abcde-rename - renames mp3 files generated by abcde

=head1 USAGE

B<dn-abcde-rename> -a I<artist>

=head1 REQUIRED ARGUMENTS

None.

=head1 REQUIRED OPTIONS

=over

=item -a

Artist name. String. Required.

=item -h

Display help and exit.

=back

=head1 OPTIONS

There are no optional options.

=head1 DESCRIPTION

The utility C<abcde> rips cds to disc. The default file name is of the format:

	  01.Song_Name.mp3

This script renames all files in the current directory to:

	  artist-name_track-number_song-name.mp3

Note conversion to lowercase. All characters that are not alphanumerics, spaces
or dashes are removed.

The artist name must be provided as a parameter. It is safest to enclose it in
quotes.

=head1 CONFIGURATION

This script requires no configuration files or environmental variables.

=head1 EXIT STATUS

This script exits with value 0 if successful, or 1 if a fatal error occurs.

=head1 INCOMPATIBILITIES

None reported.

=head1 DEPENDENCIES

=head2 Perl modules

Const::Fast, App::Dn::AbcdeRename, Moo, MooX::HandlesVia, MooX::Options,
namespace::clean, strictures, version.

=head1 DIAGNOSTICS

This script is a wrapper for the App::Dn::AbcdeRename module.
See L<App::Dn::AbcdeRename/DIAGNOSTICS> for the diagnostic messages it emits.

=head1 BUGS AND LIMITATIONS

Please report any bugs to the author.

=head1 AUTHOR

David Nebauer E<lt>david@nebauer.orgE<gt>

=head1 LICENSE AND COPYRIGHT

Copyright (c) 2024 David Nebauer E<lt>david@nebauer.orgE<gt>

This script is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.

=cut
# vim:fdm=marker
