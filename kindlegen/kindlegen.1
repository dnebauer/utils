.\" Hey, EMACS: -*- nroff -*-

.\" Filename: kindlegen.1
.\" Author:   David Nebauer
.\" History:  2018-01-13 - created

.\" -----------------------------------------------------------------
.\" NOTES
.\" -----------------------------------------------------------------
.ig

For header (.TH), first parameter, NAME, should be all caps
Second parameter, SECTION, should be 1-8, maybe w/ subsection
Other parameters are allowed: see man(7), man(1)
Please adjust the date whenever revising the manpage.

Some roff macros, for reference:
.nh        disable hyphenation
.hy        enable hyphenation
.ad l      left justify
.ad b      justify to both left and right margins
.nf        disable filling
.fi        enable filling
.br        insert line break
.sp <n>    insert n+1 empty lines
for manpage-specific macros, see man(7)

Formatting [see groff_char (7) and man (7) for details]:
\(aq  : escape sequence for (')
\[lq] : left/open double quote
\[rq] : right/close double quote
`     : left/open single quote
'     : right/close single quote
\(em  : escape sequence for em dash
\(en  : escape sequence for en dash
\.    : escape sequence for period/dot
\(rg  : registration symbol
\(tm  : trademark symbol
\fX   : escape sequence that changes font, where 'X' can be 'R|I|B|BI'
        (R = roman/normal | I = italic | B = bold | BI = bold-italic)
\fP   : switch to previous font
        in this case '\fR' could also have been used
.B    : following arguments are boldened
.I    : following arguments are italicised
.BI   : following arguments are bold alternating with italics
.BR   : following arguments are bold alternating with roman
.IB   : following arguments are italics alternating with bold
.IR   : following arguments are italics alternating with roman
.RB   : following arguments are roman alternating with bold
.RI   : following arguments are roman alternating with italics
.SM   : following arguments are small (scaled 9/10 of the regular size)
.SB   : following arguments are small bold (not small alternating with bold)
        [note: if argument in alternating pattern contains whitespace,
               enclose in whitespace]
.RS x : indent following lines by x characters
.RE   : end indent

Bulleted list:
   A bulleted list:
   .IP \[bu] 2
   lawyers
   .IP \[bu]
   guns
   .IP \[bu]
   money
Numbered list:
   .nr step 1 1
   A numbered list:
   .IP \n[step] 3
   lawyers
   .IP \n+[step]
   guns
   .IP \n+[step]
   money
..

.\" -----------------------------------------------------------------
.\" SETUP
.\" -----------------------------------------------------------------

.\" Macro: Format URL
.\"  usage:  .URL "http:\\www.gnu.org" "GNU Project" " of the"
.\"  params: 1 = url
.\"          2 = link text/name
.\"          3 = postamble (optional)
.\"  note:   The www.tmac macro provides a .URL macro package; this
.\"          is a local fallback in case www.tmac is unavailable
.\"  credit: man(7)
.de URL
\\$2 \(laURL: \\$1 \(ra\\$3
..

.\" Prefer .URL macro from www.tmac macro package if it is available
.\"  note: In the conditional below the '\n' escape returns the value of
.\"        a register, in this the '.g'
.\"        The '.g' register is only found in GNU 'troff', and it is
.\"        assumed that GNU troff will always include the www.tmac
.\"        macro package
.if \n[.g] .mso www.tmac

.\" Macro: Ellipsis
.\"  usage: .ellipsis
.\"  note: only works at beginning of line
.de ellipsis
.cc ^
...
^cc
..

.\" String: Command name
.ds self kindlegen

.\" -----------------------------------------------------------------
.\" MANPAGE CONTENT
.\" -----------------------------------------------------------------

.TH "KINDLEGEN" "1" "2018-01-13" "" "KINDLEGEN Manual"
.SH "NAME"
\*[self] \- generate mobi file
.SH "SYNOPSIS"
.BR "\*[self] " "input ["
.B "\-cX"
] [
.B "\-verbose"
] [
.B "\-western"
] [
.B "\-releasenotes"
] [
.B "\-gif"
] [
.BI "\-locale " "locale"
] [
.BI "\-o " "file"
]
.SH "DESCRIPTION"
\*[self] generates mobi output from several possible input formats. Run
\*[self] from the directory containing the input source. If conversion is
successful a mobi file will be created in the same directory.
.SH "OPTIONS"
.TP
.B "input"
Input file or directory. Filename can be \(aq.opf\(aq, \(aq.htm\(aq,
\(aq.html\(aq, \(aq.epub\(aq or \(aq.zip\(aq. Zip formats are supported for
XMDF and FB2 sources. Directory formats are supported for XMDF sources.
Required.
.TP
.B "\-cX"
Compression. \(aqX\(aq can be 0, 1 or 2.
.BR "\-c0" ": no compression (default)."
.BR "\-c1" ": standard DOC compression."
.BR "\-c2" ": Kindle huffdic compression."
Optional.
.TP
.B "\-verbose"
Provides more information during ebook conversion. Optional.
.TP
.B "\-western"
Force build of Windows-1252 book. Optional.
.TP
.B "\-releasenotes"
Display release notes. Optional.
.TP
.B "\-gif"
Images are converted to GIF format (no JPEG in the book). Optional.
.TP
.BI "\-locale " "locale"
To display messages in selected language: en = English (default), de = German,
fr = French, it = Italian, es = Spanish, zh = Chinese, ja = Japanese, pt =
Portuguese, ru = Russian, nl = Dutch. Optional.
.TP
.BI "\-o " "file"
Output file name, should not contain a directory path. Output file will be
created in the same directory as that of the input file. The default output
file name is created using the base name of the input file. Optional.
.SH "BUGS"
.nr step 1 1
Known issues:
.IP \n[step] 3
Nested <a> tags might not work properly.
.IP \n+[step]
Warning message (W14003:  The start reading location could not be resolved) is
displayed by kindlegen when it fails to identify start reading location for the
book from visual table of contents. The logic fails typically when the visual
TOC is present at the end of the spine. Please ignore the warning (or) have the
visual TOC moved to the beginning in spine.
.SH "AUTHOR"
\*[self] was written by Amazon.com.
.PP
This manual page was written by David Nebauer (david at nebauer dot org)
for the Debian project (but may be used by others).
