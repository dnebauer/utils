.\" Automatically generated by Pod::Man 4.14 (Pod::Simple 3.40)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "DN-ID3V2-OUTPUT-TO-SCRIPT 1"
.TH DN-ID3V2-OUTPUT-TO-SCRIPT 1 "2021-03-28" "perl v5.32.1" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
dn\-id3v2\-output\-to\-script \- converts id3v2 output to a script
.SH "USAGE"
.IX Header "USAGE"
\&\fBdn\-id3v2\-output\-to\-script\fR [ \fB\-i\fR \fIfile\fR ] [ \fB\-o\fR \fIfile\fR ]
.PP
\&\fBdn\-id3v2\-output\-to\-script \-h\fR
.SH "REQUIRED ARGUMENTS"
.IX Header "REQUIRED ARGUMENTS"
Nil.
.SH "REQUIRED OPTIONS"
.IX Header "REQUIRED OPTIONS"
Nil.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-i\fR  \fB\-\-input\-file\fR" 4
.IX Item "-i --input-file"
Path to input file. Optional. No default.
.IP "\fB\-o\fR  \fB\-\-output\-file\fR" 4
.IX Item "-o --output-file"
Path to output file. Optional. No default.
.IP "\fB\-h\fR  \fB\-\-help\fR" 4
.IX Item "-h --help"
Display help and exit.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
Convert id3v2 output (created using the \f(CW\*(C`\-\-list\*(C'\fR option) to a bash script. The
bash script contains an \f(CW\*(C`id3v2\*(C'\fR command for each mp3 file which sets its tags
to those present in the initial output. Any id3v1 tag information in the input
is ignored. The id3v2 output can be provided to this script as stdin (default)
or as a file. The bash script output produced can be sent to stdout (default)
or to a file. If output is sent to a file the created file is set to executable
(permissions 0755).
.PP
This my seem to be a pointless script: when would it ever be necessary to set
mp3 file tags to the values they already have? One applicable scenario, and the
impetus for this script, is that on some occasions the id3v2 utility is unable
to modify existing tags on some mp3 files. In those cases it is necessary to
remove all tags and set them anew.
.PP
Warning: for any mp3 files containing an album image the image is extracted to
the same directory as the mp3 file.  The image file has the same base name as
the mp3 file, with an extension determined by the image format (e.g.,
\&\fI.jpeg\fR).  Existing image files with the same name and extensions are silently
overwritten. An extra \f(CW\*(C`eyeD3\*(C'\fR command is added to the script file for each
image file generated. This command adds the image to the mp3 file.
.SH "DIAGNOSTICS"
.IX Header "DIAGNOSTICS"
.SS "Cannot extract \s-1COMM\s0 value from: \s-1FILEPATH\s0"
.IX Subsection "Cannot extract COMM value from: FILEPATH"
This error occurs when a comment (\s-1COMM\s0 tag) line is detected but the regular
expression matcher is unable to match the comment text.
.SS "Cannot extract \s-1TAG\s0 value from: \s-1FILEPATH\s0"
.IX Subsection "Cannot extract TAG value from: FILEPATH"
This error occurs when a id3v2 tag line (a tag other than \s-1APIC\s0 or \s-1COMM\s0) is
detected but the regular expression matcher is unable to match the tag content.
.SS "Cannot find file '\s-1FILEPATH\s0'"
.IX Subsection "Cannot find file 'FILEPATH'"
This error occurs when an invalid input filepath is provided.
.SS "Cannot write '\s-1FILEPATH\s0': \s-1OS_ERROR\s0"
.IX Subsection "Cannot write 'FILEPATH': OS_ERROR"
This error occurs when the script is unable to write its script output to a
file.
.SS "Couldn't read tags: \s-1FILEPATH\s0"
.IX Subsection "Couldn't read tags: FILEPATH"
This error occurs when attempting to extract an image from an mp3 file. It
occurs because the MP3::Tag module does not extract any tags from the mp3
file.
.SS "Invalid mp3 file path: \s-1FILEPATH\s0"
.IX Subsection "Invalid mp3 file path: FILEPATH"
This error occurs when attempting to extract an image from an mp3 file. It
occurs because the derived file path is invalid. If this error occurs it
indicates problem with the script design.
.SS "No artwork data found: \s-1FILEPATH\s0"
.IX Subsection "No artwork data found: FILEPATH"
This warning is issued if the script detects an \s-1APIC\s0 tag but is unable to
extract image data using the MP3::Tag module.
.SS "No ID3v2 tags: \s-1FILEPATH\s0"
.IX Subsection "No ID3v2 tags: FILEPATH"
This error occurs when attempting to extract an image from an mp3 file. It
occurs because the MP3::Tag module does not extract any id3v2 tags from the
mp3 file.
.SS "Unable to extract file path"
.IX Subsection "Unable to extract file path"
The id3v2 output line signifying the start of id3v2 tag data has the format:
.PP
.Vb 1
\&    id3v2 tag info for FILEPATH:
.Ve
.PP
This script extracts the filepath from this line. It generates this error if
the regular expression matcher is unable to match the filepath.
.SS "Unable to set '\s-1FILEPATH\s0' executable"
.IX Subsection "Unable to set 'FILEPATH' executable"
After the script file is generated (if the \f(CW\*(C`\-o\*(C'\fR option is used) it is set to
the permissions 0755, i.e., executable. This error occurs if that operation
fails.
.SH "DEPENDENCIES"
.IX Header "DEPENDENCIES"
.SS "Perl modules"
.IX Subsection "Perl modules"
autodie, Carp, charnames, Const::Fast, English, experimental, File::Basename,
Function::Parameters, IO::File, Moo, MooX::HandlesVia, MooX::Options, MP3::Tag,
namespace::clean, Path::Tiny, strictures, Types::Standard, version.
.SS "Executables"
.IX Subsection "Executables"
eyeD3, id3v2.
.SH "CONFIGURATION"
.IX Header "CONFIGURATION"
There is no configuration file and no configuration settings.
.SH "INCOMPATIBILITIES"
.IX Header "INCOMPATIBILITIES"
There are no known incompatibilities.
.SH "EXIT STATUS"
.IX Header "EXIT STATUS"
The script exits with a zero value if successful and a non-zero value if a
fatal error occurs.
.SH "BUGS AND LIMITATIONS"
.IX Header "BUGS AND LIMITATIONS"
Please report any bugs to the author.
.SH "AUTHOR"
.IX Header "AUTHOR"
David Nebauer (david at nebauer dot org)
.SH "LICENSE AND COPYRIGHT"
.IX Header "LICENSE AND COPYRIGHT"
Copyright (c) 2021 David Nebauer (david at nebauer dot org)
.PP
This script is free software; you can redistribute it and/or modify it under
the same terms as Perl itself.
