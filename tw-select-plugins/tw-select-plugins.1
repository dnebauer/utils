.\" Automatically generated by Pod::Man 4.14 (Pod::Simple 3.40)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "TW-SELECT-PLUGINS 1"
.TH TW-SELECT-PLUGINS 1 "2019-10-23" "perl v5.32.1" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
tw\-select\-plugins \- interactive filter for selecting plugins
.SH "USAGE"
.IX Header "USAGE"
\&\fBtw-select-plugins\fR [\fB\-d\fR \fIpath\fR] [\fB\-f\fR \fIfont\fR] [\fB\-i\fR \fIX\fR] \fIplugins\fR
.PP
\&\fBtw-select-plugins \-h\fR
.SH "REQUIRED ARGUMENTS"
.IX Header "REQUIRED ARGUMENTS"
.IP "\fIplugins\fR" 4
.IX Item "plugins"
A newline-separated list of enabled plugins. Each plugin is specified with its
subdirectory path inside a Tiddlywiki plugins directory. The customary practice
is to use two levels of subdirectory: \fI\s-1PLUGIN_AUTHOR/PLUGIN_NAME\s0\fR.
.Sp
The intended use is passing this filter the list of enabled plugins from a
client wiki's \fItiddlywiki.info\fR file. This will look something like:
.Sp
.Vb 6
\&        "aaldrich/tables",
\&        "aaldrich/task\-manager",
\&        "ahahn/tinka",
\&        "ajh/favorites",
\&        "bimlas/mediaplayer",
\&        "burning\-tree\-c/print\-river"
.Ve
.Sp
Scalar string. Required.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-d\fR  \fBplugins_directory\fR" 4
.IX Item "-d plugins_directory"
Server plugins directory.
.Sp
If specifying multiple directories, use a separate \fB\-d\fR option for each.
.Sp
If no directories are provided by the user with this option, the script will
attempt to use any directories specified with the environmental variable
\&\f(CW$TIDDLYWIKI_PLUGIN_PATH\fR. If no directories are provided by command line
option or environmental variable, the script will use the debian default plugin
location of \fI/usr/local/lib/node_modules/tiddlywiki/plugins/\fR if it exists.
.Sp
Scalar string. Optional. Default: [see discussion above].
.IP "\fB\-f\fR  \fB\-\-font\fR" 4
.IX Item "-f --font"
Font name and size. Format as a single string like \*(L"font,size\*(R" with a comma
separating the elements and no extra spaces.
.Sp
Note: the script does not check the validity of this option value. A
non-existent font name is ignored, while a non-numeric size causes a fatal
error.
.Sp
Scalar string. Optional. Default: \*(L"LucidaSans,18\*(R".
.IP "\fB\-i\fR  \fB\-\-indent\fR" 4
.IX Item "-i --indent"
Size of indent used in output.
.Sp
Scalar string. Optional. Default: 8. Negative values are silently ignored.
.IP "\fB\-h\fR" 4
.IX Item "-h"
Display help and exit.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
In client-server TiddlyWiki <https://tiddlywiki.com/> plugins are referred to
by the subdirectory path to plugin files within a plugins directory. The
customary practice is to use two levels of subdirectory:
\&\fI\s-1PLUGIN_AUTHOR/PLUGIN_NAME\s0\fR.
.PP
This script is an interactive filter that accepts a newline-separated list of
enabled plugins via standard input. The user is then presented with a list box
containing all plugins in the specified plugins directories (the method of
plugins directory selection is discussed in \*(L"Plugins directory selection\*(R"
below). The plugins provided via standard input are pre-selected. The user can
select additional plugins and deselect currently enabled plugins. When the user
presses the \f(CW\*(C`Set!\*(C'\fR button a newline-separated list of selected plugins is sent
to standard output.
.PP
If the user presses the \f(CW\*(C`Abort\*(C'\fR button the list of plugins received via
standard input is sent to standard output.
.SS "Plugins directory selection"
.IX Subsection "Plugins directory selection"
The script follows these steps to determine which plugins directories to use.
.RS 4
.IP "Supplied on command line" 4
.IX Item "Supplied on command line"
The script tries first to obtain plugins directories from command line options
(\f(CW\*(C`\-d\*(C'\fR or \f(CW\*(C`\-\-plugins_directory\*(C'\fR). If directories are provided via this method,
and at least one of them is valid, they are used.
.IP "Supplied by an environmental variable" 4
.IX Item "Supplied by an environmental variable"
If no plugins directories are provided on the command line, the script tries to
obtain them from the \f(CW$TIDDLYWIKI_PLUGIN_PATH\fR environmental variable. If at
least one valid directory is provided by this method, they are used.
.IP "Default directory" 4
.IX Item "Default directory"
If no plugins directories are provided via either of the previous methods, the
script attempts to use the default server plugins directory used by the debian
\&\f(CW\*(C`npm\*(C'\fR install, \fI/usr/local/lib/node_modules/tiddlywiki/plugins/\fR, if it is
valid.
.RE
.RS 4
.RE
.PP
In all the methods above, if an invalid directory is detected but the script
proceeds, the user is warned of the missing directories via a gui message
dialog.
.SS "Vim users"
.IX Subsection "Vim users"
This script is intended for use with vim <https://www.vim.org/> and vim clones
when editing a \fItiddlywiki.info\fR file. You can follow these steps to change
the list of selected plugins:
.IP "\(bu" 4
Perform a line-wise selection of the plugin list.
.IP "\(bu" 4
Press the colon key. This causes the command line to display the selection
marks '<,'> which indicate the following command will apply to the selected
text.
.IP "\(bu" 4
Type an exclamation point followed by the script name and any necessary
options. The command line will look something like:
.Sp
.Vb 1
\&    :\*(Aq<,\*(Aq>!tw\-select\-plugins \-f "Terminus,18"
.Ve
.IP "\(bu" 4
Press Enter.
.PP
A listbox widget will be displayed for the user to alter which plugins are
selected. If the \*(L"Set!\*(R" button is pressed, the selected text in vim is replaced
with a list of the newly selected plugins.
.PP
If an error occurs the selected text in vim may be replaced with the error
output. If this occurs the change can be easily reversed with the undo command,
invoked in Normal mode with the \f(CW\*(C`u\*(C'\fR key.
.SS "When no standard input is provided"
.IX Subsection "When no standard input is provided"
If no standard input is provided when this script is invoked, it waits
indefinitely for standard input. Pressing \f(CW\*(C`Ctrl\-d\*(C'\fR signals to the script that
standard input is complete and it will continue execution.
.SH "DIAGNOSTICS"
.IX Header "DIAGNOSTICS"
The following fatal error messages can be generated in certain circumstances:
.RS 4
.IP "'...' isn't numeric at /PATH/TO/Tk/Widget.pm line 205" 4
.IX Item "'...' isn't numeric at /PATH/TO/Tk/Widget.pm line 205"
This error occurs when a non-numeric font size is provided. For example,
passing the value \*(L"Terminus,JK\*(R" to the \f(CW\*(C`\-\-font\*(C'\fR option will result in an error
like:
.Sp
.Vb 3
\&    \*(AqJK\*(Aq isn\*(Aqt numeric at
\&    /usr/lib/x86_64\-linux\-gnu/perl5/5.28/Tk/Widget.pm
\&    line 205
.Ve
.IP "Cannot locate default plugin directory '...'" 4
.IX Item "Cannot locate default plugin directory '...'"
This script tries first to obtain plugin directories from command line options.
If none are provided, the script tries to obtain them from the
\&\f(CW$TIDDLYWIKI_PLUGIN_PATH\fR environmental variable. If no directories are
provided via either of these methods, the script attempts to use the default
server plugin directory used by the debian \f(CW\*(C`npm\*(C'\fR install:
\&\fI/usr/local/lib/node_modules/tiddlywiki/plugins/\fR. This error occurs if that
directory is unavailable.
.IP "Directory '...' does not exist" 4
.IX Item "Directory '...' does not exist"
This error occurs when an invalid directory path is supplied to the
\&\f(CW\*(C`\-\-plugins_directory\*(C'\fR option.
.IP "Expected 1 plugin directory, got ..." 4
.IX Item "Expected 1 plugin directory, got ..."
This error occurs if multiple directory paths are provided using multiple \f(CW\*(C`\-d\*(C'\fR
(\f(CW\*(C`\-\-plugins_directory\*(C'\fR) options.
.IP "Expected 1 font, got ..." 4
.IX Item "Expected 1 font, got ..."
This error occurs if multiple fonts are provided using multiple \f(CW\*(C`\-f\*(C'\fR
(\f(CW\*(C`\-\-font\*(C'\fR) options.
.IP "Expected 1 indent, got ..." 4
.IX Item "Expected 1 indent, got ..."
This error occurs if multiple indent values are provided using multiple \f(CW\*(C`\-i\*(C'\fR
(\f(CW\*(C`\-\-indent\*(C'\fR) options.
.IP "Invalid user-provided plugin directories: ..." 4
.IX Item "Invalid user-provided plugin directories: ..."
This script tries first to obtain plugin directories from command line option
\&\f(CW\*(C`\-d\*(C'\fR (\f(CW\*(C`\-\-plugins_directory\*(C'\fR). This error occurs if all directories provided
by this method are invalid.
.IP "Invalid var-provided plugin directories: ..." 4
.IX Item "Invalid var-provided plugin directories: ..."
This script tries first to obtain plugin directories from command line options.
If none are provided, the script tries to obtain them from the
\&\f(CW$TIDDLYWIKI_PLUGIN_PATH\fR environmental variable. This error occurs if all
directories in that environmental variable are invalid.
.IP "No plugins found in ..." 4
.IX Item "No plugins found in ..."
This error occurs when no subdirectories are found in the specified (or
default) server plugin directory. This is a fatal error because the server
plugin directory must contain tiddlywiki core plugins.
.IP "Option d requires an argument" 4
.IX Item "Option d requires an argument"
This error occurs when no value is provided to the \f(CW\*(C`\-d\*(C'\fR
(\f(CW\*(C`\-\-plugins_directory\*(C'\fR) option.
.IP "Option f requires an argument" 4
.IX Item "Option f requires an argument"
This error occurs when no value is provided to the \f(CW\*(C`\-f\*(C'\fR (\f(CW\*(C`\-\-font\*(C'\fR) option.
.IP "Option i requires an argument" 4
.IX Item "Option i requires an argument"
This error occurs when no value is provided to the \f(CW\*(C`\-i\*(C'\fR (\f(CW\*(C`\-\-indent\*(C'\fR) option.
.IP "Unable to write to console" 4
.IX Item "Unable to write to console"
This error occurs when the script is unable to write to the terminal.
.IP "Unrecognised \s-1OS\s0 type '...'" 4
.IX Item "Unrecognised OS type '...'"
This error occurs if the script is checking the contents of the
\&\f(CW$TIDDLYWIKI_PLUGIN_PATH\fR (which occurs only if the user provides no plugin
directories via the command line option \f(CW\*(C`\-d\*(C'\fR). To interpret this variable it
is necessary to know the path delimiter used, which varies by operating system.
The script relies on Perl::OSType to determine the operating system, and
this module can report only whether the operating system is a type of Windows
or a type of Unix (which use semicolons and colons as path delimiters,
respectively). This error occurs if the Perl::OSType module does not report
the operating system as being of either Windows or Unix type.
.ie n .IP "Value ""..."" invalid for option i (number expected)" 4
.el .IP "Value ``...'' invalid for option i (number expected)" 4
.IX Item "Value ... invalid for option i (number expected)"
This error occurs when a non-numeric value is used for the \f(CW\*(C`\-i\*(C'\fR (\f(CW\*(C`\-\-indent\*(C'\fR)
option.
.RE
.RS 4
.RE
.PP
The following warning dialog messages can be displayed. They do not abort
plugin selection.
.RS 4
.IP "Could not locate all plugins directories supplied on the command lines" 4
.IX Item "Could not locate all plugins directories supplied on the command lines"
One or more of the plugins directories provided via the \f(CW\*(C`\-d\*(C'\fR
(\f(CW\*(C`\-\-plugins_directory\*(C'\fR) option is invalid (but at least one valid directory
has been provided). This message is followed by a list of the invalid
directories.
.ie n .IP "Could not locate all plugin directories defined in $TIDDLYWIKI_PLUGIN_PATH" 4
.el .IP "Could not locate all plugin directories defined in \f(CW$TIDDLYWIKI_PLUGIN_PATH\fR" 4
.IX Item "Could not locate all plugin directories defined in $TIDDLYWIKI_PLUGIN_PATH"
This warning is displayed when invalid directories are specified in the
\&\f(CW$TIDDLYWIKI_PLUGIN_PATH\fR variable (but the variable includes at least one valid
directory). The warning message is followed by a list of the invalid
directories.
.IP "Not all currently selected plugins have been found in server directories" 4
.IX Item "Not all currently selected plugins have been found in server directories"
This warning is displayed when at least one plugin subdirectory provided via
standard input is not found in any of the specified plugins directories. This
may be caused by a misspelled plugin directory, obsolete plugin name, or
failing to specify the correct plugins directories.
.Sp
The warning is followed by a list of the plugin subdirectories that could not
be located.
.RE
.RS 4
.RE
.SH "DEPENDENCIES"
.IX Header "DEPENDENCIES"
.SS "Perl modules"
.IX Subsection "Perl modules"
Carp, Const::Fast, File::Find::Rule, Function::Parameters, Moo,
List::SomeUtils, MooX::HandlesVia, MooX::Options, namespace::clean, strictures,
Perl::OSType, Tk, Tk::ErrorDialog, Types::Path::Tiny, Types::Standard, version.
.SH "CONFIGURATION"
.IX Header "CONFIGURATION"
All configuration is done with options. There is no configuration file.
.SH "INCOMPATIBILITIES"
.IX Header "INCOMPATIBILITIES"
There are no known incompatibilities.
.SH "EXIT STATUS"
.IX Header "EXIT STATUS"
If the script exits normally it will return shell code 0, otherwise it returns
shell code 1.
.SH "BUGS AND LIMITATIONS"
.IX Header "BUGS AND LIMITATIONS"
Please report any bugs to the author.
.SH "AUTHOR"
.IX Header "AUTHOR"
David Nebauer (david at nebauer dot org)
.SH "LICENSE AND COPYRIGHT"
.IX Header "LICENSE AND COPYRIGHT"
Copyright (c) 2019 David Nebauer (david at nebauer dot org)
.PP
This script is free software; you can redistribute it and/or modify it under
the same terms as Perl itself.
